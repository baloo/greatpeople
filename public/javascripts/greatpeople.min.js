(function(){var c=this,j=c._,m=typeof StopIteration!=="undefined"?StopIteration:"__break__",h=Array.prototype,s=Object.prototype,l=h.slice,n=h.unshift,r=s.toString,v=s.hasOwnProperty,z=h.forEach,B=h.map,D=h.reduce,C=h.reduceRight,a=h.filter,e=h.every,g=h.some,o=h.indexOf,t=h.lastIndexOf;s=Array.isArray;var x=Object.keys,d=function(b){return new A(b)};if(typeof exports!=="undefined")exports._=d;c._=d;d.VERSION="1.1.2";var u=d.each=d.forEach=function(b,f,i){try{if(z&&b.forEach===z)b.forEach(f,i);else if(d.isNumber(b.length))for(var k=
0,p=b.length;k<p;k++)f.call(i,b[k],k,b);else for(k in b)v.call(b,k)&&f.call(i,b[k],k,b)}catch(q){if(q!=m)throw q;}return b};d.map=function(b,f,i){if(B&&b.map===B)return b.map(f,i);var k=[];u(b,function(p,q,w){k[k.length]=f.call(i,p,q,w)});return k};d.reduce=d.foldl=d.inject=function(b,f,i,k){var p=i!==void 0;if(D&&b.reduce===D){if(k)f=d.bind(f,k);return p?b.reduce(f,i):b.reduce(f)}u(b,function(q,w,G){i=!p&&w===0?q:f.call(k,i,q,w,G)});return i};d.reduceRight=d.foldr=function(b,f,i,k){if(C&&b.reduceRight===
C){if(k)f=d.bind(f,k);return i!==void 0?b.reduceRight(f,i):b.reduceRight(f)}b=(d.isArray(b)?b.slice():d.toArray(b)).reverse();return d.reduce(b,f,i,k)};d.find=d.detect=function(b,f,i){var k;u(b,function(p,q,w){if(f.call(i,p,q,w)){k=p;d.breakLoop()}});return k};d.filter=d.select=function(b,f,i){if(a&&b.filter===a)return b.filter(f,i);var k=[];u(b,function(p,q,w){if(f.call(i,p,q,w))k[k.length]=p});return k};d.reject=function(b,f,i){var k=[];u(b,function(p,q,w){f.call(i,p,q,w)||(k[k.length]=p)});return k};
d.every=d.all=function(b,f,i){f=f||d.identity;if(e&&b.every===e)return b.every(f,i);var k=true;u(b,function(p,q,w){(k=k&&f.call(i,p,q,w))||d.breakLoop()});return k};d.some=d.any=function(b,f,i){f=f||d.identity;if(g&&b.some===g)return b.some(f,i);var k=false;u(b,function(p,q,w){if(k=f.call(i,p,q,w))d.breakLoop()});return k};d.include=d.contains=function(b,f){if(o&&b.indexOf===o)return b.indexOf(f)!=-1;var i=false;u(b,function(k){if(i=k===f)d.breakLoop()});return i};d.invoke=function(b,f){var i=l.call(arguments,
2);return d.map(b,function(k){return(f?k[f]:k).apply(k,i)})};d.pluck=function(b,f){return d.map(b,function(i){return i[f]})};d.max=function(b,f,i){if(!f&&d.isArray(b))return Math.max.apply(Math,b);var k={computed:-Infinity};u(b,function(p,q,w){q=f?f.call(i,p,q,w):p;q>=k.computed&&(k={value:p,computed:q})});return k.value};d.min=function(b,f,i){if(!f&&d.isArray(b))return Math.min.apply(Math,b);var k={computed:Infinity};u(b,function(p,q,w){q=f?f.call(i,p,q,w):p;q<k.computed&&(k={value:p,computed:q})});
return k.value};d.sortBy=function(b,f,i){return d.pluck(d.map(b,function(k,p,q){return{value:k,criteria:f.call(i,k,p,q)}}).sort(function(k,p){var q=k.criteria,w=p.criteria;return q<w?-1:q>w?1:0}),"value")};d.sortedIndex=function(b,f,i){i=i||d.identity;for(var k=0,p=b.length;k<p;){var q=k+p>>1;i(b[q])<i(f)?k=q+1:p=q}return k};d.toArray=function(b){if(!b)return[];if(b.toArray)return b.toArray();if(d.isArray(b))return b;if(d.isArguments(b))return l.call(b);return d.values(b)};d.size=function(b){return d.toArray(b).length};
d.first=d.head=function(b,f,i){return f&&!i?l.call(b,0,f):b[0]};d.rest=d.tail=function(b,f,i){return l.call(b,d.isUndefined(f)||i?1:f)};d.last=function(b){return b[b.length-1]};d.compact=function(b){return d.filter(b,function(f){return!!f})};d.flatten=function(b){return d.reduce(b,function(f,i){if(d.isArray(i))return f.concat(d.flatten(i));f[f.length]=i;return f},[])};d.without=function(b){var f=l.call(arguments,1);return d.filter(b,function(i){return!d.include(f,i)})};d.uniq=d.unique=function(b,
f){return d.reduce(b,function(i,k,p){if(0==p||(f===true?d.last(i)!=k:!d.include(i,k)))i[i.length]=k;return i},[])};d.intersect=function(b){var f=l.call(arguments,1);return d.filter(d.uniq(b),function(i){return d.every(f,function(k){return d.indexOf(k,i)>=0})})};d.zip=function(){for(var b=l.call(arguments),f=d.max(d.pluck(b,"length")),i=Array(f),k=0;k<f;k++)i[k]=d.pluck(b,""+k);return i};d.indexOf=function(b,f){if(o&&b.indexOf===o)return b.indexOf(f);for(var i=0,k=b.length;i<k;i++)if(b[i]===f)return i;
return-1};d.lastIndexOf=function(b,f){if(t&&b.lastIndexOf===t)return b.lastIndexOf(f);for(var i=b.length;i--;)if(b[i]===f)return i;return-1};d.range=function(b,f,i){var k=l.call(arguments),p=k.length<=1;b=p?0:k[0];f=p?k[0]:k[1];i=k[2]||1;k=Math.max(Math.ceil((f-b)/i),0);p=0;for(var q=Array(k);p<k;){q[p++]=b;b+=i}return q};d.bind=function(b,f){var i=l.call(arguments,2);return function(){return b.apply(f||{},i.concat(l.call(arguments)))}};d.bindAll=function(b){var f=l.call(arguments,1);if(f.length==
0)f=d.functions(b);u(f,function(i){b[i]=d.bind(b[i],b)});return b};d.memoize=function(b,f){var i={};f=f||d.identity;return function(){var k=f.apply(this,arguments);return k in i?i[k]:i[k]=b.apply(this,arguments)}};d.delay=function(b,f){var i=l.call(arguments,2);return setTimeout(function(){return b.apply(b,i)},f)};d.defer=function(b){return d.delay.apply(d,[b,1].concat(l.call(arguments,1)))};d.wrap=function(b,f){return function(){var i=[b].concat(l.call(arguments));return f.apply(f,i)}};d.compose=
function(){var b=l.call(arguments);return function(){for(var f=l.call(arguments),i=b.length-1;i>=0;i--)f=[b[i].apply(this,f)];return f[0]}};d.keys=x||function(b){if(d.isArray(b))return d.range(0,b.length);var f=[],i;for(i in b)if(v.call(b,i))f[f.length]=i;return f};d.values=function(b){return d.map(b,d.identity)};d.functions=d.methods=function(b){return d.filter(d.keys(b),function(f){return d.isFunction(b[f])}).sort()};d.extend=function(b){u(l.call(arguments,1),function(f){for(var i in f)b[i]=f[i]});
return b};d.clone=function(b){return d.isArray(b)?b.slice():d.extend({},b)};d.tap=function(b,f){f(b);return b};d.isEqual=function(b,f){if(b===f)return true;var i=typeof b;if(i!=typeof f)return false;if(b==f)return true;if(!b&&f||b&&!f)return false;if(b.isEqual)return b.isEqual(f);if(d.isDate(b)&&d.isDate(f))return b.getTime()===f.getTime();if(d.isNaN(b)&&d.isNaN(f))return false;if(d.isRegExp(b)&&d.isRegExp(f))return b.source===f.source&&b.global===f.global&&b.ignoreCase===f.ignoreCase&&b.multiline===
f.multiline;if(i!=="object")return false;if(b.length&&b.length!==f.length)return false;i=d.keys(b);var k=d.keys(f);if(i.length!=k.length)return false;for(var p in b)if(!(p in f)||!d.isEqual(b[p],f[p]))return false;return true};d.isEmpty=function(b){if(d.isArray(b)||d.isString(b))return b.length===0;for(var f in b)if(v.call(b,f))return false;return true};d.isElement=function(b){return!!(b&&b.nodeType==1)};d.isArray=s||function(b){return!!(b&&b.concat&&b.unshift&&!b.callee)};d.isArguments=function(b){return!!(b&&
b.callee)};d.isFunction=function(b){return!!(b&&b.constructor&&b.call&&b.apply)};d.isString=function(b){return!!(b===""||b&&b.charCodeAt&&b.substr)};d.isNumber=function(b){return b===+b||r.call(b)==="[object Number]"};d.isBoolean=function(b){return b===true||b===false};d.isDate=function(b){return!!(b&&b.getTimezoneOffset&&b.setUTCFullYear)};d.isRegExp=function(b){return!!(b&&b.test&&b.exec&&(b.ignoreCase||b.ignoreCase===false))};d.isNaN=function(b){return d.isNumber(b)&&isNaN(b)};d.isNull=function(b){return b===
null};d.isUndefined=function(b){return typeof b=="undefined"};d.noConflict=function(){c._=j;return this};d.identity=function(b){return b};d.times=function(b,f,i){for(var k=0;k<b;k++)f.call(i,k)};d.breakLoop=function(){throw m;};d.mixin=function(b){u(d.functions(b),function(f){F(f,d[f]=b[f])})};var E=0;d.uniqueId=function(b){var f=E++;return b?b+f:f};d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};d.template=function(b,f){var i=d.templateSettings;i="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+
b.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(i.interpolate,function(k,p){return"',"+p.replace(/\\'/g,"'")+",'"}).replace(i.evaluate||null,function(k,p){return"');"+p.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";i=new Function("obj",i);return f?i(f):i};var A=function(b){this._wrapped=b};d.prototype=A.prototype;var y=function(b,f){return f?d(b).chain():b},F=function(b,f){A.prototype[b]=function(){var i=
l.call(arguments);n.call(i,this._wrapped);return y(f.apply(d,i),this._chain)}};d.mixin(d);u(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var f=h[b];A.prototype[b]=function(){f.apply(this._wrapped,arguments);return y(this._wrapped,this._chain)}});u(["concat","join","slice"],function(b){var f=h[b];A.prototype[b]=function(){return y(f.apply(this._wrapped,arguments),this._chain)}});A.prototype.chain=function(){this._chain=true;return this};A.prototype.value=function(){return this._wrapped}})();(function(){var c;c=typeof exports!=="undefined"?exports:this.Backbone={};c.VERSION="0.3.3";var j=this._;if(!j&&typeof require!=="undefined")j=require("underscore")._;var m=this.jQuery||this.Zepto;c.emulateHTTP=false;c.emulateJSON=false;c.Events={bind:function(a,e){this._callbacks||(this._callbacks={});(this._callbacks[a]||(this._callbacks[a]=[])).push(e);return this},unbind:function(a,e){var g;if(a){if(g=this._callbacks)if(e){g=g[a];if(!g)return this;for(var o=0,t=g.length;o<t;o++)if(e===g[o]){g.splice(o,
1);break}}else g[a]=[]}else this._callbacks={};return this},trigger:function(a){var e,g,o,t;if(!(g=this._callbacks))return this;if(e=g[a]){o=0;for(t=e.length;o<t;o++)e[o].apply(this,Array.prototype.slice.call(arguments,1))}if(e=g.all){o=0;for(t=e.length;o<t;o++)e[o].apply(this,arguments)}return this}};c.Model=function(a,e){a||(a={});if(this.defaults)a=j.extend({},this.defaults,a);this.attributes={};this._escapedAttributes={};this.cid=j.uniqueId("c");this.set(a,{silent:true});this._previousAttributes=
j.clone(this.attributes);if(e&&e.collection)this.collection=e.collection;this.initialize(a,e)};j.extend(c.Model.prototype,c.Events,{_previousAttributes:null,_changed:false,initialize:function(){},toJSON:function(){return j.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var e;if(e=this._escapedAttributes[a])return e;e=this.attributes[a];return this._escapedAttributes[a]=(e==null?"":e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,
"&quot;")},set:function(a,e){e||(e={});if(!a)return this;if(a.attributes)a=a.attributes;var g=this.attributes,o=this._escapedAttributes;if(!e.silent&&this.validate&&!this._performValidation(a,e))return false;if("id"in a)this.id=a.id;for(var t in a){var x=a[t];if(!j.isEqual(g[t],x)){g[t]=x;delete o[t];if(!e.silent){this._changed=true;this.trigger("change:"+t,this,x,e)}}}!e.silent&&this._changed&&this.change(e);return this},unset:function(a,e){e||(e={});var g={};g[a]=void 0;if(!e.silent&&this.validate&&
!this._performValidation(g,e))return false;delete this.attributes[a];delete this._escapedAttributes[a];if(!e.silent){this._changed=true;this.trigger("change:"+a,this,void 0,e);this.change(e)}return this},clear:function(a){a||(a={});var e=this.attributes,g={};for(attr in e)g[attr]=void 0;if(!a.silent&&this.validate&&!this._performValidation(g,a))return false;this.attributes={};this._escapedAttributes={};if(!a.silent){this._changed=true;for(attr in e)this.trigger("change:"+attr,this,void 0,a);this.change(a)}return this},
fetch:function(a){a||(a={});var e=this,g=C(a.error,e,a);(this.sync||c.sync)("read",this,function(o){if(!e.set(e.parse(o),a))return false;a.success&&a.success(e,o)},g);return this},save:function(a,e){e||(e={});if(a&&!this.set(a,e))return false;var g=this,o=C(e.error,g,e),t=this.isNew()?"create":"update";(this.sync||c.sync)(t,this,function(x){if(!g.set(g.parse(x),e))return false;e.success&&e.success(g,x)},o);return this},destroy:function(a){a||(a={});var e=this,g=C(a.error,e,a);(this.sync||c.sync)("delete",
this,function(o){e.collection&&e.collection.remove(e);a.success&&a.success(e,o)},g);return this},url:function(){var a=D(this.collection);if(this.isNew())return a;return a+(a.charAt(a.length-1)=="/"?"":"/")+this.id},parse:function(a){return a},clone:function(){return new this.constructor(this)},isNew:function(){return!this.id},change:function(a){this.trigger("change",this,a);this._previousAttributes=j.clone(this.attributes);this._changed=false},hasChanged:function(a){if(a)return this._previousAttributes[a]!=
this.attributes[a];return this._changed},changedAttributes:function(a){a||(a=this.attributes);var e=this._previousAttributes,g=false,o;for(o in a)if(!j.isEqual(e[o],a[o])){g=g||{};g[o]=a[o]}return g},previous:function(a){if(!a||!this._previousAttributes)return null;return this._previousAttributes[a]},previousAttributes:function(){return j.clone(this._previousAttributes)},_performValidation:function(a,e){var g=this.validate(a);if(g){e.error?e.error(this,g):this.trigger("error",this,g,e);return false}return true}});
c.Collection=function(a,e){e||(e={});if(e.comparator){this.comparator=e.comparator;delete e.comparator}this._boundOnModelEvent=j.bind(this._onModelEvent,this);this._reset();a&&this.refresh(a,{silent:true});this.initialize(a,e)};j.extend(c.Collection.prototype,c.Events,{model:c.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,e){if(j.isArray(a))for(var g=0,o=a.length;g<o;g++)this._add(a[g],e);else this._add(a,e);return this},remove:function(a,
e){if(j.isArray(a))for(var g=0,o=a.length;g<o;g++)this._remove(a[g],e);else this._remove(a,e);return this},get:function(a){if(a==null)return null;return this._byId[a.id!=null?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");this.models=this.sortBy(this.comparator);a.silent||this.trigger("refresh",this,a);return this},pluck:function(a){return j.map(this.models,
function(e){return e.get(a)})},refresh:function(a,e){a||(a=[]);e||(e={});this._reset();this.add(a,{silent:true});e.silent||this.trigger("refresh",this,e);return this},fetch:function(a){a||(a={});var e=this,g=C(a.error,e,a);(this.sync||c.sync)("read",this,function(o){e.refresh(e.parse(o));a.success&&a.success(e,o)},g);return this},create:function(a,e){var g=this;e||(e={});if(a instanceof c.Model)a.collection=g;else a=new this.model(a,{collection:g});return a.save(null,{success:function(o,t){g.add(o);
e.success&&e.success(o,t)},error:e.error})},parse:function(a){return a},chain:function(){return j(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={}},_add:function(a,e){e||(e={});a instanceof c.Model||(a=new this.model(a,{collection:this}));var g=this.getByCid(a);if(g)throw Error(["Can't add the same model to a set twice",g.id]);this._byId[a.id]=a;this._byCid[a.cid]=a;a.collection=this;this.models.splice(this.comparator?this.sortedIndex(a,this.comparator):
this.length,0,a);a.bind("all",this._boundOnModelEvent);this.length++;e.silent||a.trigger("add",a,this,e);return a},_remove:function(a,e){e||(e={});a=this.getByCid(a)||this.get(a);if(!a)return null;delete this._byId[a.id];delete this._byCid[a.cid];delete a.collection;this.models.splice(this.indexOf(a),1);this.length--;e.silent||a.trigger("remove",a,this,e);a.unbind("all",this._boundOnModelEvent);return a},_onModelEvent:function(a,e){if(a==="change:id"){delete this._byId[e.previous("id")];this._byId[e.id]=
e}this.trigger.apply(this,arguments)}});j.each(["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty"],function(a){c.Collection.prototype[a]=function(){return j[a].apply(j,[this.models].concat(j.toArray(arguments)))}});c.Controller=function(a){a||(a={});if(a.routes)this.routes=a.routes;this._bindRoutes();
this.initialize(a)};var h=/:([\w\d]+)/g,s=/\*([\w\d]+)/g;j.extend(c.Controller.prototype,c.Events,{initialize:function(){},route:function(a,e,g){c.history||(c.history=new c.History);j.isRegExp(a)||(a=this._routeToRegExp(a));c.history.route(a,j.bind(function(o){o=this._extractParameters(a,o);g.apply(this,o);this.trigger.apply(this,["route:"+e].concat(o))},this))},saveLocation:function(a){c.history.saveLocation(a)},_bindRoutes:function(){if(this.routes)for(var a in this.routes){var e=this.routes[a];
this.route(a,e,this[e])}},_routeToRegExp:function(a){a=a.replace(h,"([^/]*)").replace(s,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,e){return a.exec(e).slice(1)}});c.History=function(){this.handlers=[];this.fragment=this.getFragment();j.bindAll(this,"checkUrl")};var l=/^#*/;j.extend(c.History.prototype,{interval:50,getFragment:function(a){return(a||window.location).hash.replace(l,"")},start:function(){var a=document.documentMode;if(a=m.browser.msie&&(!a||a<=7))this.iframe=m('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;
"onhashchange"in window&&!a?m(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval);return this.loadUrl()},route:function(a,e){this.handlers.push({route:a,callback:e})},checkUrl:function(){var a=this.getFragment();if(a==this.fragment&&this.iframe)a=this.getFragment(this.iframe.location);if(a==this.fragment||a==decodeURIComponent(this.fragment))return false;if(this.iframe)window.location.hash=this.iframe.location.hash=a;this.loadUrl()},loadUrl:function(){var a=this.fragment=
this.getFragment();return j.any(this.handlers,function(e){if(e.route.test(a)){e.callback(a);return true}})},saveLocation:function(a){a=(a||"").replace(l,"");if(this.fragment!=a){window.location.hash=this.fragment=a;if(this.iframe&&a!=this.getFragment(this.iframe.location)){this.iframe.document.open().close();this.iframe.location.hash=a}}}});c.View=function(a){this._configure(a||{});this._ensureElement();this.delegateEvents();this.initialize(a)};var n=/^(\w+)\s*(.*)$/;j.extend(c.View.prototype,c.Events,
{tagName:"div",$:function(a){return m(a,this.el)},initialize:function(){},render:function(){return this},remove:function(){m(this.el).remove();return this},make:function(a,e,g){a=document.createElement(a);e&&m(a).attr(e);g&&m(a).html(g);return a},delegateEvents:function(a){if(a||(a=this.events)){m(this.el).unbind();for(var e in a){var g=a[e],o=e.match(n),t=o[1];o=o[2];g=j.bind(this[g],this);o===""?m(this.el).bind(t,g):m(this.el).delegate(o,t,g)}}},_configure:function(a){if(this.options)a=j.extend({},
this.options,a);if(a.model)this.model=a.model;if(a.collection)this.collection=a.collection;if(a.el)this.el=a.el;if(a.id)this.id=a.id;if(a.className)this.className=a.className;if(a.tagName)this.tagName=a.tagName;this.options=a},_ensureElement:function(){if(!this.el){var a={};if(this.id)a.id=this.id;if(this.className)a["class"]=this.className;this.el=this.make(this.tagName,a)}}});var r=function(a,e){var g=B(this,a,e);g.extend=r;return g};c.Model.extend=c.Collection.extend=c.Controller.extend=c.View.extend=
r;var v={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};c.sync=function(a,e,g,o){var t=v[a];a=a==="create"||a==="update"?JSON.stringify(e.toJSON()):null;e={url:D(e),type:t,contentType:"application/json",data:a,dataType:"json",processData:false,success:g,error:o};if(c.emulateJSON){e.contentType="application/x-www-form-urlencoded";e.processData=true;e.data=a?{model:a}:{}}if(c.emulateHTTP)if(t==="PUT"||t==="DELETE"){if(c.emulateJSON)e.data._method=t;e.type="POST";e.beforeSend=function(x){x.setRequestHeader("X-HTTP-Method-Override",
t)}}m.ajax(e)};var z=function(){},B=function(a,e,g){var o;o=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return a.apply(this,arguments)};z.prototype=a.prototype;o.prototype=new z;e&&j.extend(o.prototype,e);g&&j.extend(o,g);o.prototype.constructor=o;o.__super__=a.prototype;return o},D=function(a){if(!(a&&a.url))throw Error("A 'url' property or function must be specified");return j.isFunction(a.url)?a.url():a.url},C=function(a,e,g){return function(o){a?a(e,o):e.trigger("error",e,o,g)}}})();(function(c){function j(n){function r(v){var z=RegExp(c.map(v,encodeURIComponent).join("|"),"ig");return function(B){return B.replace(z,decodeURIComponent)}}n=c.extend({unescape:false},n||{});m.encoder=function(v){if(v===true)return function(z){return z};if(typeof v=="string"&&(v=r(v.split("")))||typeof v=="function")return function(z){return v(encodeURIComponent(z))};return encodeURIComponent}(n.unescape)}var m={put:function(n,r){(r||window).location.hash=this.encoder(n)},get:function(n){n=(n||window).location.hash.replace(/^#/,
"");try{return c.browser.mozilla?n:decodeURIComponent(n)}catch(r){return n}},encoder:encodeURIComponent},h={id:"__jQuery_history",init:function(){var n='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';c("body").prepend(n);return this},_document:function(){return c("#"+this.id)[0].contentWindow.document},put:function(n){var r=this._document();r.open();r.close();m.put(n,r)},get:function(){return m.get(this._document())}},s={};s.base={callback:undefined,type:undefined,check:function(){},
load:function(){},init:function(n,r){j(r);l.callback=n;l._options=r;l._init()},_init:function(){},_options:{}};s.timer={_appState:undefined,_init:function(){var n=m.get();l._appState=n;l.callback(n);setInterval(l.check,100)},check:function(){var n=m.get();if(n!=l._appState){l._appState=n;l.callback(n)}},load:function(n){if(n!=l._appState){m.put(n);l._appState=n;l.callback(n)}}};s.iframeTimer={_appState:undefined,_init:function(){var n=m.get();l._appState=n;h.init().put(n);l.callback(n);setInterval(l.check,
100)},check:function(){var n=h.get(),r=m.get();if(r!=n)if(r==l._appState){l._appState=n;m.put(n);l.callback(n)}else{l._appState=r;h.put(r);l.callback(r)}},load:function(n){if(n!=l._appState){m.put(n);h.put(n);l._appState=n;l.callback(n)}}};s.hashchangeEvent={_init:function(){l.callback(m.get());c(window).bind("hashchange",l.check)},check:function(){l.callback(m.get())},load:function(n){m.put(n)}};var l=c.extend({},s.base);l.type=c.browser.msie&&(c.browser.version<8||document.documentMode<8)?"iframeTimer":
"onhashchange"in window?"hashchangeEvent":"timer";c.extend(l,s[l.type]);c.history=l})(jQuery);(function(c){c.fn.editable=function(j,m){if("disable"==j)c(this).data("disabled.editable",true);else if("enable"==j)c(this).data("disabled.editable",false);else if("destroy"==j)c(this).unbind(c(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");else{var h=c.extend({},c.fn.editable.defaults,{target:j},m),s=c.editable.types[h.type].plugin||function(){},l=c.editable.types[h.type].submit||function(){},n=c.editable.types[h.type].buttons||c.editable.types.defaults.buttons,
r=c.editable.types[h.type].content||c.editable.types.defaults.content,v=c.editable.types[h.type].element||c.editable.types.defaults.element,z=c.editable.types[h.type].reset||c.editable.types.defaults.reset,B=h.callback||function(){},D=h.onedit||function(){},C=h.onsubmit||function(){},a=h.onreset||function(){},e=h.onerror||z;h.tooltip&&c(this).attr("title",h.tooltip);h.autowidth="auto"==h.width;h.autoheight="auto"==h.height;return this.each(function(){var g=this,o=c(g).width(),t=c(g).height();c(this).data("event.editable",
h.event);c.trim(c(this).html())||c(this).html(h.placeholder);c(this).bind(h.event,function(x){if(true!==c(this).data("disabled.editable"))if(!g.editing)if(false!==D.apply(this,[h,g])){x.preventDefault();x.stopPropagation();h.tooltip&&c(g).removeAttr("title");if(0==c(g).width()){h.width=o;h.height=t}else{if(h.width!="none")h.width=h.autowidth?c(g).width():h.width;if(h.height!="none")h.height=h.autoheight?c(g).height():h.height}c(this).html().toLowerCase().replace(/(;|")/g,"")==h.placeholder.toLowerCase().replace(/(;|")/g,
"")&&c(this).html("");g.editing=true;g.revert=c(g).html();c(g).html("");var d=c("<form />");if(h.cssclass)"inherit"==h.cssclass?d.attr("class",c(g).attr("class")):d.attr("class",h.cssclass);if(h.style)if("inherit"==h.style){d.attr("style",c(g).attr("style"));d.css("display",c(g).css("display"))}else d.attr("style",h.style);var u=v.apply(d,[h,g]),E;if(h.loadurl){var A=setTimeout(function(){u.disabled=true;r.apply(d,[h.loadtext,h,g])},100);x={};x[h.id]=g.id;c.isFunction(h.loaddata)?c.extend(x,h.loaddata.apply(g,
[g.revert,h])):c.extend(x,h.loaddata);c.ajax({type:h.loadtype,url:h.loadurl,data:x,async:false,success:function(y){window.clearTimeout(A);E=y;u.disabled=false}})}else if(h.data){E=h.data;if(c.isFunction(h.data))E=h.data.apply(g,[g.revert,h])}else E=g.revert;r.apply(d,[E,h,g]);u.attr("name",h.name);n.apply(d,[h,g]);c(g).append(d);s.apply(d,[h,g]);c(":input:visible:enabled:first",d).focus();h.select&&u.select();u.keydown(function(y){if(y.keyCode==27){y.preventDefault();z.apply(d,[h,g])}});if("cancel"==
h.onblur)u.blur(function(){A=setTimeout(function(){z.apply(d,[h,g])},500)});else if("submit"==h.onblur)u.blur(function(){A=setTimeout(function(){d.submit()},200)});else c.isFunction(h.onblur)?u.blur(function(){h.onblur.apply(g,[u.val(),h])}):u.blur(function(){});d.submit(function(y){A&&clearTimeout(A);y.preventDefault();if(false!==C.apply(d,[h,g]))if(false!==l.apply(d,[h,g]))if(c.isFunction(h.target)){y=h.target.apply(g,[u.val(),h]);c(g).html(y);g.editing=false;B.apply(g,[g.innerHTML,h]);c.trim(c(g).html())||
c(g).html(h.placeholder)}else{y={};y[h.name]=u.val();y[h.id]=g.id;c.isFunction(h.submitdata)?c.extend(y,h.submitdata.apply(g,[g.revert,h])):c.extend(y,h.submitdata);if("PUT"==h.method)y._method="put";c(g).html(h.indicator);var F={type:"POST",data:y,dataType:"html",url:h.target,success:function(b){F.dataType=="html"&&c(g).html(b);g.editing=false;B.apply(g,[b,h]);c.trim(c(g).html())||c(g).html(h.placeholder)},error:function(b){e.apply(d,[h,g,b])}};c.extend(F,h.ajaxoptions);c.ajax(F)}c(g).attr("title",
h.tooltip);return false})}});this.reset=function(x){if(this.editing)if(false!==a.apply(x,[h,g])){c(g).html(g.revert);g.editing=false;c.trim(c(g).html())||c(g).html(h.placeholder);h.tooltip&&c(g).attr("title",h.tooltip)}}})}};c.editable={types:{defaults:{element:function(){var j=c('<input type="hidden"></input>');c(this).append(j);return j},content:function(j){c(":input:first",this).val(j)},reset:function(j,m){m.reset(this)},buttons:function(j,m){var h=this;if(j.submit){if(j.submit.match(/>$/))var s=
c(j.submit).click(function(){s.attr("type")!="submit"&&h.submit()});else{s=c('<button type="submit" />');s.html(j.submit)}c(this).append(s)}if(j.cancel){if(j.cancel.match(/>$/))var l=c(j.cancel);else{l=c('<button type="cancel" />');l.html(j.cancel)}c(this).append(l);c(l).click(function(){(c.isFunction(c.editable.types[j.type].reset)?c.editable.types[j.type].reset:c.editable.types.defaults.reset).apply(h,[j,m]);return false})}}},text:{element:function(j){var m=c("<input />");j.width!="none"&&m.width(j.width);
j.height!="none"&&m.height(j.height);m.attr("autocomplete","off");c(this).append(m);return m}},textarea:{element:function(j){var m=c("<textarea />");if(j.rows)m.attr("rows",j.rows);else j.height!="none"&&m.height(j.height);if(j.cols)m.attr("cols",j.cols);else j.width!="none"&&m.width(j.width);c(this).append(m);return m}},select:{element:function(){var j=c("<select />");c(this).append(j);return j},content:function(j,m,h){if(String==j.constructor)eval("var json = "+j);else var s=j;for(var l in s)if(s.hasOwnProperty(l))if("selected"!=
l){j=c("<option />").val(l).append(s[l]);c("select",this).append(j)}c("select",this).children().each(function(){if(c(this).val()==s.selected||c(this).text()==c.trim(h.revert))c(this).attr("selected","selected")})}}},addInputType:function(j,m){c.editable.types[j]=m}};c.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{}}})(jQuery);(function(c){var j=Backbone.Model.extend({initialize:function(){this.set({stars:this.get("rating")?this.get("rating")*100/4:0})}}),m=Backbone.Collection.extend({model:j,box:"new",url:"/api/applicants",query:null,page:0,pageCount:1,parse:function(l){this.page=l.pageNumber;this.pageCount=l.pageCount;return l.applications}}),h=Backbone.View.extend({tagName:"dl",className:"candidate-list",render:function(){c("#applicantTmpl").tmpl(this.model.toJSON()).appendTo(this.el);return this}}),s=Backbone.View.extend({el:document.getElementById("applist"),
loadBox:function(l,n){c("#search").val(n?n.split(",")[0]:"");this.refreshLinks(n);this.collection.box=l;this.collection.url="/api/applicants/"+l;if(n){this.collection.query=n;this.collection.page=1;if(n.indexOf(",")>-1){this.collection.query=n.split(",")[0];this.collection.page=n.split(",")[1]}this.collection.url+="?q="+encodeURIComponent(this.collection.query)+"&p="+this.collection.page}else{this.collection.query="";this.collection.page=1}var r=this;this.spinner();this.collection.fetch({success:function(){r.render()},
error:function(v,z){z.status==403&&r.login()}})},refreshLinks:function(l){var n=l?"/"+l.split(",")[0]:"";c(["new","inprogress","archived"]).each(function(){c(".navlink."+this+" a").attr("href","#"+this+n)})},spinner:function(){c("#spinner").show()},render:function(){c("#spinner").hide();var l=c(this.el).html("");if(this.collection.length===0)l.append(c("#noApplicantTmpl").tmpl());else{var n=this.collection.box;this.collection.map(function(v){return new h({model:v})}).forEach(function(v){l.append(v.render().el)});
c(".tags > ul > li > a").each(function(){c(this).attr("href","#"+n+"/tag:"+c(this).attr("data"))});var r=c("#pagination");r.html("");this.collection.pageCount>1&&_(this.collection.pageCount).times(function(v){r.append(this.collection.page==v?v+1:c("#pageLink").tmpl({page:v+1,link:"#"+this.collection.box+"/"+(this.collection.query?this.collection.query:"")+","+(v+1)}));r.append("&nbsp;")});c("#pagination").toggle(this.collection.pageCount>1)}},login:function(){window.location="/login?callback="+encodeURIComponent(window.location)}});
j=Backbone.Controller.extend({routes:{"":"index","new":"newapp","new/:query":"newapp",inprogress:"inprogress","inprogress/:query":"inprogress",archived:"archived","archived/:query":"archived"},initialize:function(){this.apps=new m;this.view=new s({collection:this.apps})},index:function(){window.location.hash="#new"},newapp:function(l){this._showBox("new",l)},inprogress:function(l){this._showBox("inprogress",l)},archived:function(l){this._showBox("archived",l)},_showBox:function(l,n,r){this.box=l;
this.view.loadBox(l,n,r);c(".navlink a").removeClass("active");c("."+l+" a").addClass("active")}});window.Workspace=j})(jQuery);(function(c){var j=function(m,h){this.resumeId=m;this.options=c.extend({allTags:[],userTags:[]},h);this.options.post&&this.initInplaceEdit();this.initTabBar();this.setTagBox()};j.prototype={initInplaceEdit:function(){var m=this;c(".inplace").each(function(){c(this).editable(m.options.post,{tooltip:"Click to edit",attribute:this.id,style:"display: inline",submitdata:{resumeId:m.resumeId},width:this.id=="name"?"auto":100,onsubmit:function(){m.options.notification&&m.options.notification.display("Saving...")},
callback:function(){m.options.notification&&m.options.notification.display("Successfully saved",2E3)},onerror:function(){m.options.notification&&m.options.notification.display("Error, change NOT saved",2E3)}})})},initTabBar:function(){c(".tabs a").click(function(m){m.preventDefault();c(".tabs a").removeClass("active");c(this).addClass("active");c(".answer > div").hide();c(".answer > "+this.hash).fadeIn("fast")})},setTagBox:function(){var m=this;c("#mytags").tagit({availableTags:this.options.allTags,
values:this.options.userTags});c("#mytags .tagit-input").bind("keydown keypress",function(){m.saveTags()})},saveTags:function(){var m=this;this.tagsTimer&&window.clearTimeout(this.tagsTimer);this.tagsTimer=window.setTimeout(function(){var h=[];c(".tagit-choice","#mytags").each(function(){h.push(c("input",this).attr("value"))});m.options.notification&&m.options.notification.display("Saving...");c.ajax({type:"POST",url:m.options.post,data:{resumeId:m.resumeId,id:"tags",value:h.join(" ")},success:function(){m.options.notification&&
m.options.notification.display("Successfully saved",2E3)},error:function(){m.options.notification&&m.options.notification.display("Error, change NOT saved",2E3)}})},1E3)}};window.Candidate=j})(jQuery);(function(c){var j=function(m){this.elt=c(m);this.notif=c("<span></span>").addClass("notification").hide();this.elt.append(this.notif);this.timer=null};j.prototype={display:function(m,h){this.timer&&window.clearTimeout(this.timer);this.notif.text(m);this.notif.show();var s=this.notif;if(h&&h>0)this.timer=window.setTimeout(function(){s.hide()},h)}};window.Notification=j})(jQuery);(function(c){var j=null;c.fn.searchbox=function(m){function h(l){j&&window.clearTimeout(j);j=window.setTimeout(function(){var n=c(s).val();window.location.hash=n.length<3?"#"+m.box:"#"+m.box+"/"+n},l?300:0)}var s=this;c(this).keyup(function(){h(true)});c(this).click(function(){c(this).val()===""&&h()})}})(jQuery);