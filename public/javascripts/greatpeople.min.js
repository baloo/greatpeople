(function(){var f=this,m=f._,h=typeof StopIteration!=="undefined"?StopIteration:"__break__",d=Array.prototype,q=Object.prototype,l=d.slice,n=d.unshift,t=q.toString,u=q.hasOwnProperty,y=d.forEach,z=d.map,E=d.reduce,B=d.reduceRight,F=d.filter,C=d.every,o=d.some,A=d.indexOf,D=d.lastIndexOf;q=Array.isArray;var x=Object.keys,a=function(b){return new k(b)};if(typeof exports!=="undefined")exports._=a;f._=a;a.VERSION="1.1.2";var c=a.each=a.forEach=function(b,e,i){try{if(y&&b.forEach===y)b.forEach(e,i);else if(a.isNumber(b.length))for(var j=
0,p=b.length;j<p;j++)e.call(i,b[j],j,b);else for(j in b)u.call(b,j)&&e.call(i,b[j],j,b)}catch(r){if(r!=h)throw r;}return b};a.map=function(b,e,i){if(z&&b.map===z)return b.map(e,i);var j=[];c(b,function(p,r,w){j[j.length]=e.call(i,p,r,w)});return j};a.reduce=a.foldl=a.inject=function(b,e,i,j){var p=i!==void 0;if(E&&b.reduce===E){if(j)e=a.bind(e,j);return p?b.reduce(e,i):b.reduce(e)}c(b,function(r,w,G){i=!p&&w===0?r:e.call(j,i,r,w,G)});return i};a.reduceRight=a.foldr=function(b,e,i,j){if(B&&b.reduceRight===
B){if(j)e=a.bind(e,j);return i!==void 0?b.reduceRight(e,i):b.reduceRight(e)}b=(a.isArray(b)?b.slice():a.toArray(b)).reverse();return a.reduce(b,e,i,j)};a.find=a.detect=function(b,e,i){var j;c(b,function(p,r,w){if(e.call(i,p,r,w)){j=p;a.breakLoop()}});return j};a.filter=a.select=function(b,e,i){if(F&&b.filter===F)return b.filter(e,i);var j=[];c(b,function(p,r,w){if(e.call(i,p,r,w))j[j.length]=p});return j};a.reject=function(b,e,i){var j=[];c(b,function(p,r,w){e.call(i,p,r,w)||(j[j.length]=p)});return j};
a.every=a.all=function(b,e,i){e=e||a.identity;if(C&&b.every===C)return b.every(e,i);var j=true;c(b,function(p,r,w){(j=j&&e.call(i,p,r,w))||a.breakLoop()});return j};a.some=a.any=function(b,e,i){e=e||a.identity;if(o&&b.some===o)return b.some(e,i);var j=false;c(b,function(p,r,w){if(j=e.call(i,p,r,w))a.breakLoop()});return j};a.include=a.contains=function(b,e){if(A&&b.indexOf===A)return b.indexOf(e)!=-1;var i=false;c(b,function(j){if(i=j===e)a.breakLoop()});return i};a.invoke=function(b,e){var i=l.call(arguments,
2);return a.map(b,function(j){return(e?j[e]:j).apply(j,i)})};a.pluck=function(b,e){return a.map(b,function(i){return i[e]})};a.max=function(b,e,i){if(!e&&a.isArray(b))return Math.max.apply(Math,b);var j={computed:-Infinity};c(b,function(p,r,w){r=e?e.call(i,p,r,w):p;r>=j.computed&&(j={value:p,computed:r})});return j.value};a.min=function(b,e,i){if(!e&&a.isArray(b))return Math.min.apply(Math,b);var j={computed:Infinity};c(b,function(p,r,w){r=e?e.call(i,p,r,w):p;r<j.computed&&(j={value:p,computed:r})});
return j.value};a.sortBy=function(b,e,i){return a.pluck(a.map(b,function(j,p,r){return{value:j,criteria:e.call(i,j,p,r)}}).sort(function(j,p){var r=j.criteria,w=p.criteria;return r<w?-1:r>w?1:0}),"value")};a.sortedIndex=function(b,e,i){i=i||a.identity;for(var j=0,p=b.length;j<p;){var r=j+p>>1;i(b[r])<i(e)?j=r+1:p=r}return j};a.toArray=function(b){if(!b)return[];if(b.toArray)return b.toArray();if(a.isArray(b))return b;if(a.isArguments(b))return l.call(b);return a.values(b)};a.size=function(b){return a.toArray(b).length};
a.first=a.head=function(b,e,i){return e&&!i?l.call(b,0,e):b[0]};a.rest=a.tail=function(b,e,i){return l.call(b,a.isUndefined(e)||i?1:e)};a.last=function(b){return b[b.length-1]};a.compact=function(b){return a.filter(b,function(e){return!!e})};a.flatten=function(b){return a.reduce(b,function(e,i){if(a.isArray(i))return e.concat(a.flatten(i));e[e.length]=i;return e},[])};a.without=function(b){var e=l.call(arguments,1);return a.filter(b,function(i){return!a.include(e,i)})};a.uniq=a.unique=function(b,
e){return a.reduce(b,function(i,j,p){if(0==p||(e===true?a.last(i)!=j:!a.include(i,j)))i[i.length]=j;return i},[])};a.intersect=function(b){var e=l.call(arguments,1);return a.filter(a.uniq(b),function(i){return a.every(e,function(j){return a.indexOf(j,i)>=0})})};a.zip=function(){for(var b=l.call(arguments),e=a.max(a.pluck(b,"length")),i=Array(e),j=0;j<e;j++)i[j]=a.pluck(b,""+j);return i};a.indexOf=function(b,e){if(A&&b.indexOf===A)return b.indexOf(e);for(var i=0,j=b.length;i<j;i++)if(b[i]===e)return i;
return-1};a.lastIndexOf=function(b,e){if(D&&b.lastIndexOf===D)return b.lastIndexOf(e);for(var i=b.length;i--;)if(b[i]===e)return i;return-1};a.range=function(b,e,i){var j=l.call(arguments),p=j.length<=1;b=p?0:j[0];e=p?j[0]:j[1];i=j[2]||1;j=Math.max(Math.ceil((e-b)/i),0);p=0;for(var r=Array(j);p<j;){r[p++]=b;b+=i}return r};a.bind=function(b,e){var i=l.call(arguments,2);return function(){return b.apply(e||{},i.concat(l.call(arguments)))}};a.bindAll=function(b){var e=l.call(arguments,1);if(e.length==
0)e=a.functions(b);c(e,function(i){b[i]=a.bind(b[i],b)});return b};a.memoize=function(b,e){var i={};e=e||a.identity;return function(){var j=e.apply(this,arguments);return j in i?i[j]:i[j]=b.apply(this,arguments)}};a.delay=function(b,e){var i=l.call(arguments,2);return setTimeout(function(){return b.apply(b,i)},e)};a.defer=function(b){return a.delay.apply(a,[b,1].concat(l.call(arguments,1)))};a.wrap=function(b,e){return function(){var i=[b].concat(l.call(arguments));return e.apply(e,i)}};a.compose=
function(){var b=l.call(arguments);return function(){for(var e=l.call(arguments),i=b.length-1;i>=0;i--)e=[b[i].apply(this,e)];return e[0]}};a.keys=x||function(b){if(a.isArray(b))return a.range(0,b.length);var e=[],i;for(i in b)if(u.call(b,i))e[e.length]=i;return e};a.values=function(b){return a.map(b,a.identity)};a.functions=a.methods=function(b){return a.filter(a.keys(b),function(e){return a.isFunction(b[e])}).sort()};a.extend=function(b){c(l.call(arguments,1),function(e){for(var i in e)b[i]=e[i]});
return b};a.clone=function(b){return a.isArray(b)?b.slice():a.extend({},b)};a.tap=function(b,e){e(b);return b};a.isEqual=function(b,e){if(b===e)return true;var i=typeof b;if(i!=typeof e)return false;if(b==e)return true;if(!b&&e||b&&!e)return false;if(b.isEqual)return b.isEqual(e);if(a.isDate(b)&&a.isDate(e))return b.getTime()===e.getTime();if(a.isNaN(b)&&a.isNaN(e))return false;if(a.isRegExp(b)&&a.isRegExp(e))return b.source===e.source&&b.global===e.global&&b.ignoreCase===e.ignoreCase&&b.multiline===
e.multiline;if(i!=="object")return false;if(b.length&&b.length!==e.length)return false;i=a.keys(b);var j=a.keys(e);if(i.length!=j.length)return false;for(var p in b)if(!(p in e)||!a.isEqual(b[p],e[p]))return false;return true};a.isEmpty=function(b){if(a.isArray(b)||a.isString(b))return b.length===0;for(var e in b)if(u.call(b,e))return false;return true};a.isElement=function(b){return!!(b&&b.nodeType==1)};a.isArray=q||function(b){return!!(b&&b.concat&&b.unshift&&!b.callee)};a.isArguments=function(b){return!!(b&&
b.callee)};a.isFunction=function(b){return!!(b&&b.constructor&&b.call&&b.apply)};a.isString=function(b){return!!(b===""||b&&b.charCodeAt&&b.substr)};a.isNumber=function(b){return b===+b||t.call(b)==="[object Number]"};a.isBoolean=function(b){return b===true||b===false};a.isDate=function(b){return!!(b&&b.getTimezoneOffset&&b.setUTCFullYear)};a.isRegExp=function(b){return!!(b&&b.test&&b.exec&&(b.ignoreCase||b.ignoreCase===false))};a.isNaN=function(b){return a.isNumber(b)&&isNaN(b)};a.isNull=function(b){return b===
null};a.isUndefined=function(b){return typeof b=="undefined"};a.noConflict=function(){f._=m;return this};a.identity=function(b){return b};a.times=function(b,e,i){for(var j=0;j<b;j++)e.call(i,j)};a.breakLoop=function(){throw h;};a.mixin=function(b){c(a.functions(b),function(e){v(e,a[e]=b[e])})};var g=0;a.uniqueId=function(b){var e=g++;return b?b+e:e};a.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};a.template=function(b,e){var i=a.templateSettings;i="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+
b.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(i.interpolate,function(j,p){return"',"+p.replace(/\\'/g,"'")+",'"}).replace(i.evaluate||null,function(j,p){return"');"+p.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";i=new Function("obj",i);return e?i(e):i};var k=function(b){this._wrapped=b};a.prototype=k.prototype;var s=function(b,e){return e?a(b).chain():b},v=function(b,e){k.prototype[b]=function(){var i=
l.call(arguments);n.call(i,this._wrapped);return s(e.apply(a,i),this._chain)}};a.mixin(a);c(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var e=d[b];k.prototype[b]=function(){e.apply(this._wrapped,arguments);return s(this._wrapped,this._chain)}});c(["concat","join","slice"],function(b){var e=d[b];k.prototype[b]=function(){return s(e.apply(this._wrapped,arguments),this._chain)}});k.prototype.chain=function(){this._chain=true;return this};k.prototype.value=function(){return this._wrapped}})();(function(){var f=this,m=f.Backbone,h;h=typeof exports!=="undefined"?exports:f.Backbone={};h.VERSION="0.5.1";var d=f._;if(!d&&typeof require!=="undefined")d=require("underscore")._;var q=f.jQuery||f.Zepto;h.noConflict=function(){f.Backbone=m;return this};h.emulateHTTP=false;h.emulateJSON=false;h.Events={bind:function(a,c){var g=this._callbacks||(this._callbacks={});(g[a]||(g[a]=[])).push(c);return this},unbind:function(a,c){var g;if(a){if(g=this._callbacks)if(c){g=g[a];if(!g)return this;for(var k=
0,s=g.length;k<s;k++)if(c===g[k]){g[k]=null;break}}else g[a]=[]}else this._callbacks={};return this},trigger:function(a){var c,g,k,s,v=2;if(!(g=this._callbacks))return this;for(;v--;)if(c=v?a:"all",c=g[c])for(var b=0,e=c.length;b<e;b++)(k=c[b])?(s=v?Array.prototype.slice.call(arguments,1):arguments,k.apply(this,s)):(c.splice(b,1),b--,e--);return this}};h.Model=function(a,c){var g;a||(a={});if(g=this.defaults){d.isFunction(g)&&(g=g());a=d.extend({},g,a)}this.attributes={};this._escapedAttributes={};
this.cid=d.uniqueId("c");this.set(a,{silent:true});this._changed=false;this._previousAttributes=d.clone(this.attributes);if(c&&c.collection)this.collection=c.collection;this.initialize(a,c)};d.extend(h.Model.prototype,h.Events,{_previousAttributes:null,_changed:false,idAttribute:"id",initialize:function(){},toJSON:function(){return d.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var c;if(c=this._escapedAttributes[a])return c;c=this.attributes[a];return this._escapedAttributes[a]=
(c==null?"":""+c).replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27").replace(/\//g,"&#x2F;")},has:function(a){return this.attributes[a]!=null},set:function(a,c){c||(c={});if(!a)return this;if(a.attributes)a=a.attributes;var g=this.attributes,k=this._escapedAttributes;if(!c.silent&&this.validate&&!this._performValidation(a,c))return false;if(this.idAttribute in a)this.id=a[this.idAttribute];var s=this._changing;this._changing=
true;for(var v in a){var b=a[v];if(!d.isEqual(g[v],b)){g[v]=b;delete k[v];this._changed=true;c.silent||this.trigger("change:"+v,this,b,c)}}!s&&!c.silent&&this._changed&&this.change(c);this._changing=false;return this},unset:function(a,c){if(!(a in this.attributes))return this;c||(c={});var g={};g[a]=void 0;if(!c.silent&&this.validate&&!this._performValidation(g,c))return false;delete this.attributes[a];delete this._escapedAttributes[a];a==this.idAttribute&&delete this.id;this._changed=true;c.silent||
(this.trigger("change:"+a,this,void 0,c),this.change(c));return this},clear:function(a){a||(a={});var c,g=this.attributes,k={};for(c in g)k[c]=void 0;if(!a.silent&&this.validate&&!this._performValidation(k,a))return false;this.attributes={};this._escapedAttributes={};this._changed=true;if(!a.silent){for(c in g)this.trigger("change:"+c,this,void 0,a);this.change(a)}return this},fetch:function(a){a||(a={});var c=this,g=a.success;a.success=function(k,s,v){if(!c.set(c.parse(k,v),a))return false;g&&g(c,
k)};a.error=x(a.error,c,a);return(this.sync||h.sync).call(this,"read",this,a)},save:function(a,c){c||(c={});if(a&&!this.set(a,c))return false;var g=this,k=c.success;c.success=function(v,b,e){if(!g.set(g.parse(v,e),c))return false;k&&k(g,v,e)};c.error=x(c.error,g,c);var s=this.isNew()?"create":"update";return(this.sync||h.sync).call(this,s,this,c)},destroy:function(a){a||(a={});if(this.isNew())return this.trigger("destroy",this,this.collection,a);var c=this,g=a.success;a.success=function(k){c.trigger("destroy",
c,c.collection,a);g&&g(c,k)};a.error=x(a.error,c,a);return(this.sync||h.sync).call(this,"delete",this,a)},url:function(){var a=A(this.collection)||this.urlRoot||D();if(this.isNew())return a;return a+(a.charAt(a.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this)},isNew:function(){return this.id==null},change:function(a){this.trigger("change",this,a);this._previousAttributes=d.clone(this.attributes);this._changed=false},
hasChanged:function(a){if(a)return this._previousAttributes[a]!=this.attributes[a];return this._changed},changedAttributes:function(a){a||(a=this.attributes);var c=this._previousAttributes,g=false,k;for(k in a)d.isEqual(c[k],a[k])||(g=g||{},g[k]=a[k]);return g},previous:function(a){if(!a||!this._previousAttributes)return null;return this._previousAttributes[a]},previousAttributes:function(){return d.clone(this._previousAttributes)},_performValidation:function(a,c){var g=this.validate(a);if(g)return c.error?
c.error(this,g,c):this.trigger("error",this,g,c),false;return true}});h.Collection=function(a,c){c||(c={});if(c.comparator)this.comparator=c.comparator;d.bindAll(this,"_onModelEvent","_removeReference");this._reset();a&&this.reset(a,{silent:true});this.initialize.apply(this,arguments)};d.extend(h.Collection.prototype,h.Events,{model:h.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,c){if(d.isArray(a))for(var g=0,k=a.length;g<k;g++)this._add(a[g],
c);else this._add(a,c);return this},remove:function(a,c){if(d.isArray(a))for(var g=0,k=a.length;g<k;g++)this._remove(a[g],c);else this._remove(a,c);return this},get:function(a){if(a==null)return null;return this._byId[a.id!=null?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");this.models=this.sortBy(this.comparator);a.silent||this.trigger("reset",
this,a);return this},pluck:function(a){return d.map(this.models,function(c){return c.get(a)})},reset:function(a,c){a||(a=[]);c||(c={});this.each(this._removeReference);this._reset();this.add(a,{silent:true});c.silent||this.trigger("reset",this,c);return this},fetch:function(a){a||(a={});var c=this,g=a.success;a.success=function(k,s,v){c[a.add?"add":"reset"](c.parse(k,v),a);g&&g(c,k)};a.error=x(a.error,c,a);return(this.sync||h.sync).call(this,"read",this,a)},create:function(a,c){var g=this;c||(c={});
a=this._prepareModel(a,c);if(!a)return false;var k=c.success;c.success=function(s,v,b){g.add(s,c);k&&k(s,v,b)};a.save(null,c);return a},parse:function(a){return a},chain:function(){return d(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(a,c){if(a instanceof h.Model){if(!a.collection)a.collection=this}else{var g=a;a=new this.model(g,{collection:this});a.validate&&!a._performValidation(g,c)&&(a=false)}return a},_add:function(a,
c){c||(c={});a=this._prepareModel(a,c);if(!a)return false;var g=this.getByCid(a)||this.get(a);if(g)throw Error(["Can't add the same model to a set twice",g.id]);this._byId[a.id]=a;this._byCid[a.cid]=a;this.models.splice(c.at!=null?c.at:this.comparator?this.sortedIndex(a,this.comparator):this.length,0,a);a.bind("all",this._onModelEvent);this.length++;c.silent||a.trigger("add",a,this,c);return a},_remove:function(a,c){c||(c={});a=this.getByCid(a)||this.get(a);if(!a)return null;delete this._byId[a.id];
delete this._byCid[a.cid];this.models.splice(this.indexOf(a),1);this.length--;c.silent||a.trigger("remove",a,this,c);this._removeReference(a);return a},_removeReference:function(a){this==a.collection&&delete a.collection;a.unbind("all",this._onModelEvent)},_onModelEvent:function(a,c,g,k){(a=="add"||a=="remove")&&g!=this||(a=="destroy"&&this._remove(c,k),c&&a==="change:"+c.idAttribute&&(delete this._byId[c.previous(c.idAttribute)],this._byId[c.id]=c),this.trigger.apply(this,arguments))}});d.each(["forEach",
"each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty"],function(a){h.Collection.prototype[a]=function(){return d[a].apply(d,[this.models].concat(d.toArray(arguments)))}});h.Router=function(a){a||(a={});if(a.routes)this.routes=a.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var l=/:([\w\d]+)/g,
n=/\*([\w\d]+)/g,t=/[-[\]{}()+?.,\\^$|#\s]/g;d.extend(h.Router.prototype,h.Events,{initialize:function(){},route:function(a,c,g){h.history||(h.history=new h.History);d.isRegExp(a)||(a=this._routeToRegExp(a));h.history.route(a,d.bind(function(k){k=this._extractParameters(a,k);g.apply(this,k);this.trigger.apply(this,["route:"+c].concat(k))},this))},navigate:function(a,c){h.history.navigate(a,c)},_bindRoutes:function(){if(this.routes){var a=[],c;for(c in this.routes)a.unshift([c,this.routes[c]]);c=0;
for(var g=a.length;c<g;c++)this.route(a[c][0],a[c][1],this[a[c][1]])}},_routeToRegExp:function(a){a=a.replace(t,"\\$&").replace(l,"([^/]*)").replace(n,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,c){return a.exec(c).slice(1)}});h.History=function(){this.handlers=[];d.bindAll(this,"checkUrl")};var u=/^#*/,y=/msie [\w.]+/,z=false;d.extend(h.History.prototype,{interval:50,getFragment:function(a,c){if(a==null)if(this._hasPushState||c){a=window.location.pathname;var g=window.location.search;
g&&(a+=g);a.indexOf(this.options.root)==0&&(a=a.substr(this.options.root.length))}else a=window.location.hash;return a.replace(u,"")},start:function(a){if(z)throw Error("Backbone.history has already been started");this.options=d.extend({},{root:"/"},this.options,a);this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState);a=this.getFragment();var c=document.documentMode;if(c=y.exec(navigator.userAgent.toLowerCase())&&(!c||
c<=7)){this.iframe=q('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(a)}this._hasPushState?q(window).bind("popstate",this.checkUrl):"onhashchange"in window&&!c?q(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval);this.fragment=a;z=true;a=window.location;c=a.pathname==this.options.root;if(this._wantsPushState&&!this._hasPushState&&!c){this.fragment=this.getFragment(null,true);window.location.replace(this.options.root+
"#"+this.fragment)}else if(this._wantsPushState&&this._hasPushState&&c&&a.hash){this.fragment=a.hash.replace(u,"");window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment)}return this.loadUrl()},route:function(a,c){this.handlers.unshift({route:a,callback:c})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.iframe.location.hash));if(a==this.fragment||a==decodeURIComponent(this.fragment))return false;this.iframe&&
this.navigate(a);this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(a){var c=this.fragment=this.getFragment(a);return d.any(this.handlers,function(g){if(g.route.test(c))return g.callback(c),true})},navigate:function(a,c){var g=(a||"").replace(u,"");if(!(this.fragment==g||this.fragment==decodeURIComponent(g))){if(this._hasPushState){var k=window.location;g.indexOf(this.options.root)!=0&&(g=this.options.root+g);this.fragment=g;window.history.pushState({},document.title,k.protocol+
"//"+k.host+g)}else if(window.location.hash=this.fragment=g,this.iframe&&g!=this.getFragment(this.iframe.location.hash)){this.iframe.document.open().close();this.iframe.location.hash=g}c&&this.loadUrl(a)}}});h.View=function(a){this.cid=d.uniqueId("view");this._configure(a||{});this._ensureElement();this.delegateEvents();this.initialize.apply(this,arguments)};var E=/^(\S+)\s*(.*)$/,B=["model","collection","el","id","attributes","className","tagName"];d.extend(h.View.prototype,h.Events,{tagName:"div",
$:function(a){return q(a,this.el)},initialize:function(){},render:function(){return this},remove:function(){q(this.el).remove();return this},make:function(a,c,g){a=document.createElement(a);c&&q(a).attr(c);g&&q(a).html(g);return a},delegateEvents:function(a){if(a||(a=this.events))for(var c in q(this.el).unbind(".delegateEvents"+this.cid),a){var g=this[a[c]];if(!g)throw Error('Event "'+a[c]+'" does not exist');var k=c.match(E),s=k[1];k=k[2];g=d.bind(g,this);s+=".delegateEvents"+this.cid;k===""?q(this.el).bind(s,
g):q(this.el).delegate(k,s,g)}},_configure:function(a){this.options&&(a=d.extend({},this.options,a));for(var c=0,g=B.length;c<g;c++){var k=B[c];a[k]&&(this[k]=a[k])}this.options=a},_ensureElement:function(){if(this.el){if(d.isString(this.el))this.el=q(this.el).get(0)}else{var a=this.attributes||{};if(this.id)a.id=this.id;if(this.className)a["class"]=this.className;this.el=this.make(this.tagName,a)}}});h.Model.extend=h.Collection.extend=h.Router.extend=h.View.extend=function(a,c){var g=o(this,a,c);
g.extend=this.extend;return g};var F={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};h.sync=function(a,c,g){var k=F[a];g=d.extend({type:k,dataType:"json",processData:false},g);if(!g.url)g.url=A(c)||D();if(!g.data&&c&&(a=="create"||a=="update")){g.contentType="application/json";g.data=JSON.stringify(c.toJSON())}if(h.emulateJSON){g.contentType="application/x-www-form-urlencoded";g.processData=true;g.data=g.data?{model:g.data}:{}}if(h.emulateHTTP&&(k==="PUT"||k==="DELETE")){if(h.emulateJSON)g.data._method=
k;g.type="POST";g.beforeSend=function(s){s.setRequestHeader("X-HTTP-Method-Override",k)}}return q.ajax(g)};var C=function(){},o=function(a,c,g){var k;k=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return a.apply(this,arguments)};d.extend(k,a);C.prototype=a.prototype;k.prototype=new C;c&&d.extend(k.prototype,c);g&&d.extend(k,g);k.prototype.constructor=k;k.__super__=a.prototype;return k},A=function(a){if(!a||!a.url)return null;return d.isFunction(a.url)?a.url():a.url},D=function(){throw Error('A "url" property or function must be specified');
},x=function(a,c,g){return function(k){a?a(c,k,g):c.trigger("error",c,k,g)}}}).call(this);(function(f){function m(n){function t(u){var y=RegExp(f.map(u,encodeURIComponent).join("|"),"ig");return function(z){return z.replace(y,decodeURIComponent)}}n=f.extend({unescape:false},n||{});h.encoder=function(u){if(u===true)return function(y){return y};if(typeof u=="string"&&(u=t(u.split("")))||typeof u=="function")return function(y){return u(encodeURIComponent(y))};return encodeURIComponent}(n.unescape)}var h={put:function(n,t){(t||window).location.hash=this.encoder(n)},get:function(n){n=(n||window).location.hash.replace(/^#/,
"");try{return f.browser.mozilla?n:decodeURIComponent(n)}catch(t){return n}},encoder:encodeURIComponent},d={id:"__jQuery_history",init:function(){var n='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';f("body").prepend(n);return this},_document:function(){return f("#"+this.id)[0].contentWindow.document},put:function(n){var t=this._document();t.open();t.close();h.put(n,t)},get:function(){return h.get(this._document())}},q={};q.base={callback:undefined,type:undefined,check:function(){},
load:function(){},init:function(n,t){m(t);l.callback=n;l._options=t;l._init()},_init:function(){},_options:{}};q.timer={_appState:undefined,_init:function(){var n=h.get();l._appState=n;l.callback(n);setInterval(l.check,100)},check:function(){var n=h.get();if(n!=l._appState){l._appState=n;l.callback(n)}},load:function(n){if(n!=l._appState){h.put(n);l._appState=n;l.callback(n)}}};q.iframeTimer={_appState:undefined,_init:function(){var n=h.get();l._appState=n;d.init().put(n);l.callback(n);setInterval(l.check,
100)},check:function(){var n=d.get(),t=h.get();if(t!=n)if(t==l._appState){l._appState=n;h.put(n);l.callback(n)}else{l._appState=t;d.put(t);l.callback(t)}},load:function(n){if(n!=l._appState){h.put(n);d.put(n);l._appState=n;l.callback(n)}}};q.hashchangeEvent={_init:function(){l.callback(h.get());f(window).bind("hashchange",l.check)},check:function(){l.callback(h.get())},load:function(n){h.put(n)}};var l=f.extend({},q.base);l.type=f.browser.msie&&(f.browser.version<8||document.documentMode<8)?"iframeTimer":
"onhashchange"in window?"hashchangeEvent":"timer";f.extend(l,q[l.type]);f.history=l})(jQuery);(function(f){f.fn.editable=function(m,h){if("disable"==m)f(this).data("disabled.editable",true);else if("enable"==m)f(this).data("disabled.editable",false);else if("destroy"==m)f(this).unbind(f(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");else{var d=f.extend({},f.fn.editable.defaults,{target:m},h),q=f.editable.types[d.type].plugin||function(){},l=f.editable.types[d.type].submit||function(){},n=f.editable.types[d.type].buttons||f.editable.types.defaults.buttons,
t=f.editable.types[d.type].content||f.editable.types.defaults.content,u=f.editable.types[d.type].element||f.editable.types.defaults.element,y=f.editable.types[d.type].reset||f.editable.types.defaults.reset,z=d.callback||function(){},E=d.onedit||function(){},B=d.onsubmit||function(){},F=d.onreset||function(){},C=d.onerror||y;d.tooltip&&f(this).attr("title",d.tooltip);d.autowidth="auto"==d.width;d.autoheight="auto"==d.height;return this.each(function(){var o=this,A=f(o).width(),D=f(o).height();f(this).data("event.editable",
d.event);f.trim(f(this).html())||f(this).html(d.placeholder);f(this).bind(d.event,function(x){if(true!==f(this).data("disabled.editable"))if(!o.editing)if(false!==E.apply(this,[d,o])){x.preventDefault();x.stopPropagation();d.tooltip&&f(o).removeAttr("title");if(0==f(o).width()){d.width=A;d.height=D}else{if(d.width!="none")d.width=d.autowidth?f(o).width():d.width;if(d.height!="none")d.height=d.autoheight?f(o).height():d.height}f(this).html().toLowerCase().replace(/(;|")/g,"")==d.placeholder.toLowerCase().replace(/(;|")/g,
"")&&f(this).html("");o.editing=true;o.revert=f(o).html();f(o).html("");var a=f("<form />");if(d.cssclass)"inherit"==d.cssclass?a.attr("class",f(o).attr("class")):a.attr("class",d.cssclass);if(d.style)if("inherit"==d.style){a.attr("style",f(o).attr("style"));a.css("display",f(o).css("display"))}else a.attr("style",d.style);var c=u.apply(a,[d,o]),g;if(d.loadurl){var k=setTimeout(function(){c.disabled=true;t.apply(a,[d.loadtext,d,o])},100);x={};x[d.id]=o.id;f.isFunction(d.loaddata)?f.extend(x,d.loaddata.apply(o,
[o.revert,d])):f.extend(x,d.loaddata);f.ajax({type:d.loadtype,url:d.loadurl,data:x,async:false,success:function(s){window.clearTimeout(k);g=s;c.disabled=false}})}else if(d.data){g=d.data;if(f.isFunction(d.data))g=d.data.apply(o,[o.revert,d])}else g=o.revert;t.apply(a,[g,d,o]);c.attr("name",d.name);n.apply(a,[d,o]);f(o).append(a);q.apply(a,[d,o]);f(":input:visible:enabled:first",a).focus();d.select&&c.select();c.keydown(function(s){if(s.keyCode==27){s.preventDefault();y.apply(a,[d,o])}});if("cancel"==
d.onblur)c.blur(function(){k=setTimeout(function(){y.apply(a,[d,o])},500)});else if("submit"==d.onblur)c.blur(function(){k=setTimeout(function(){a.submit()},200)});else f.isFunction(d.onblur)?c.blur(function(){d.onblur.apply(o,[c.val(),d])}):c.blur(function(){});a.submit(function(s){k&&clearTimeout(k);s.preventDefault();if(false!==B.apply(a,[d,o]))if(false!==l.apply(a,[d,o]))if(f.isFunction(d.target)){s=d.target.apply(o,[c.val(),d]);f(o).html(s);o.editing=false;z.apply(o,[o.innerHTML,d]);f.trim(f(o).html())||
f(o).html(d.placeholder)}else{s={};s[d.name]=c.val();s[d.id]=o.id;f.isFunction(d.submitdata)?f.extend(s,d.submitdata.apply(o,[o.revert,d])):f.extend(s,d.submitdata);if("PUT"==d.method)s._method="put";f(o).html(d.indicator);var v={type:"POST",data:s,dataType:"html",url:d.target,success:function(b){v.dataType=="html"&&f(o).html(b);o.editing=false;z.apply(o,[b,d]);f.trim(f(o).html())||f(o).html(d.placeholder)},error:function(b){C.apply(a,[d,o,b])}};f.extend(v,d.ajaxoptions);f.ajax(v)}f(o).attr("title",
d.tooltip);return false})}});this.reset=function(x){if(this.editing)if(false!==F.apply(x,[d,o])){f(o).html(o.revert);o.editing=false;f.trim(f(o).html())||f(o).html(d.placeholder);d.tooltip&&f(o).attr("title",d.tooltip)}}})}};f.editable={types:{defaults:{element:function(){var m=f('<input type="hidden"></input>');f(this).append(m);return m},content:function(m){f(":input:first",this).val(m)},reset:function(m,h){h.reset(this)},buttons:function(m,h){var d=this;if(m.submit){if(m.submit.match(/>$/))var q=
f(m.submit).click(function(){q.attr("type")!="submit"&&d.submit()});else{q=f('<button type="submit" />');q.html(m.submit)}f(this).append(q)}if(m.cancel){if(m.cancel.match(/>$/))var l=f(m.cancel);else{l=f('<button type="cancel" />');l.html(m.cancel)}f(this).append(l);f(l).click(function(){(f.isFunction(f.editable.types[m.type].reset)?f.editable.types[m.type].reset:f.editable.types.defaults.reset).apply(d,[m,h]);return false})}}},text:{element:function(m){var h=f("<input />");m.width!="none"&&h.width(m.width);
m.height!="none"&&h.height(m.height);h.attr("autocomplete","off");f(this).append(h);return h}},textarea:{element:function(m){var h=f("<textarea />");if(m.rows)h.attr("rows",m.rows);else m.height!="none"&&h.height(m.height);if(m.cols)h.attr("cols",m.cols);else m.width!="none"&&h.width(m.width);f(this).append(h);return h}},select:{element:function(){var m=f("<select />");f(this).append(m);return m},content:function(m,h,d){if(String==m.constructor)eval("var json = "+m);else var q=m;for(var l in q)if(q.hasOwnProperty(l))if("selected"!=
l){m=f("<option />").val(l).append(q[l]);f("select",this).append(m)}f("select",this).children().each(function(){if(f(this).val()==q.selected||f(this).text()==f.trim(d.revert))f(this).attr("selected","selected")})}}},addInputType:function(m,h){f.editable.types[m]=h}};f.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{}}})(jQuery);(function(f){var m=Backbone.Model.extend({initialize:function(){this.set({stars:this.get("rating")?this.get("rating")*100/4:0})}}),h=new (Backbone.Collection.extend({model:m,box:"new",url:"/api/applicants",query:null,page:0,pageCount:1,parse:function(l){this.page=l.pageNumber;this.pageCount=l.pageCount;return l.applications}})),d=Backbone.View.extend({tagName:"dl",className:"candidate-list",template:_.template(f("#applicantTmpl").html()),render:function(){f(this.el).html(this.template(this.model.toJSON()));
return this}}),q=Backbone.View.extend({el:f("#applist")[0],initialize:function(){_.bindAll(this,"render");h.bind("reset",this.render)},refreshLinks:function(l){var n=l?"/"+l.split(",")[0]:"";f(["new","inprogress","archived"]).each(function(){f(".navlink."+this+" a").attr("href","#"+this+n)})},spinner:function(){f("#spinner").show()},render:function(){f("#spinner").hide();var l=f(this.el).html("");if(h.length===0)l.append(_.template(f("#noApplicantTmpl").html()));else{var n=h.box;h.map(function(u){return new d({model:u})}).forEach(function(u){l.append(u.render().el)});
f(".tags > ul > li > a").each(function(){f(this).attr("href","#"+n+"/tag:"+f(this).attr("data"))});var t=f("#pagination");t.html("");h.pageCount>1&&_(h.pageCount).times(function(u){t.append(h.page==u?u+1:_template(f("#pageLink").html(),{page:u+1,link:"#"+h.box+"/"+(h.query?h.query:"")+","+(u+1)}));t.append("&nbsp;")});f("#pagination").toggle(h.pageCount>1)}},login:function(){window.location="/login?callback="+encodeURIComponent(window.location)}});m=Backbone.Router.extend({routes:{"":"index","new":"newapp",
"new/:query":"newapp",inprogress:"inprogress","inprogress/:query":"inprogress",archived:"archived","archived/:query":"archived"},initialize:function(){this.view=new q({})},index:function(){window.location.hash="#new"},newapp:function(l){this._showBox("new",l)},inprogress:function(l){this._showBox("inprogress",l)},archived:function(l){this._showBox("archived",l)},_showBox:function(l,n){this.box=l;f("#search").val(n?n.split(",")[0]:"");h.box=this.box;h.url="/api/applicants/"+this.box;if(n){h.query=
n;h.page=1;if(n.indexOf(",")>-1){h.query=n.split(",")[0];h.page=n.split(",")[1]}h.url+="?q="+encodeURIComponent(h.query)+"&p="+h.page}else{h.query="";h.page=1}h.fetch();f(".navlink a").removeClass("active");f("."+l+" a").addClass("active")}});window.Workspace=m})(jQuery);(function(f){var m=function(h,d){this.resumeId=h;this.options=f.extend({allTags:[],userTags:[]},d);this.options.post&&this.initInplaceEdit();this.initTabBar();this.setTagBox()};m.prototype={initInplaceEdit:function(){var h=this;f(".inplace").each(function(){f(this).editable(h.options.post,{tooltip:"Click to edit",attribute:this.id,style:"display: inline",submitdata:{resumeId:h.resumeId},width:this.id=="name"?"auto":100,onsubmit:function(){h.options.notification&&h.options.notification.display("Saving...")},
callback:function(){h.options.notification&&h.options.notification.display("Successfully saved",2E3)},onerror:function(){h.options.notification&&h.options.notification.display("Error, change NOT saved",2E3)}})})},initTabBar:function(){f(".tabs a").click(function(h){h.preventDefault();f(".tabs a").removeClass("active");f(this).addClass("active");f(".answer > div").hide();f(".answer > "+this.hash).fadeIn("fast")})},setTagBox:function(){var h=this;f("#mytags").tagit({availableTags:this.options.allTags,
values:this.options.userTags});f("#mytags .tagit-input").bind("keydown keypress",function(){h.saveTags()})},saveTags:function(){var h=this;this.tagsTimer&&window.clearTimeout(this.tagsTimer);this.tagsTimer=window.setTimeout(function(){var d=[];f(".tagit-choice","#mytags").each(function(){d.push(f("input",this).attr("value"))});h.options.notification&&h.options.notification.display("Saving...");f.ajax({type:"POST",url:h.options.post,data:{resumeId:h.resumeId,id:"tags",value:d.join(" ")},success:function(){h.options.notification&&
h.options.notification.display("Successfully saved",2E3)},error:function(){h.options.notification&&h.options.notification.display("Error, change NOT saved",2E3)}})},1E3)}};window.Candidate=m})(jQuery);(function(f){var m=function(h){this.elt=f(h);this.notif=f("<span></span>").addClass("notification").hide();this.elt.append(this.notif);this.timer=null};m.prototype={display:function(h,d){this.timer&&window.clearTimeout(this.timer);this.notif.text(h);this.notif.show();var q=this.notif;if(d&&d>0)this.timer=window.setTimeout(function(){q.hide()},d)}};window.Notification=m})(jQuery);(function(f){var m=null;f.fn.searchbox=function(h){function d(l){m&&window.clearTimeout(m);m=window.setTimeout(function(){var n=f(q).val();window.location.hash=n.length<3?"#"+h.box:"#"+h.box+"/"+n},l?300:0)}var q=this;f(this).keyup(function(){d(true)});f(this).click(function(){f(this).val()===""&&d()})}})(jQuery);